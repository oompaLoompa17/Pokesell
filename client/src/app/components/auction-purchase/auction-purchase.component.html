<div class="container">
    <mat-card class="purchase-card">
      <mat-card-header>
        <mat-card-title>Buyout Auction Listing #{{ listing?.id }}</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div *ngIf="error" class="error">{{ error }}</div>
        <div *ngIf="loading" class="loading">
          <mat-spinner></mat-spinner>
        </div>
        <div *ngIf="listing && !loading">
          <p><strong>Grade:</strong> {{ listing.overallGrade }}</p>
          <p><strong>Buyout Price:</strong> SGD {{ listing.buyoutPrice | number:'1.2-2' }}</p>
          <img [src]="'data:image/jpeg;base64,' + listing.frontImage" alt="Front Image" class="thumbnail" />
          <img [src]="'data:image/jpeg;base64,' + listing.backImage" alt="Back Image" class="thumbnail" />
          <div class="payment-section">
            <h3>Pay with Stripe</h3>
            <div id="card-element"></div>
            <button mat-raised-button color="primary" (click)="pay()" [disabled]="processing">
              {{ processing ? 'Processing...' : 'Pay Now' }}
            </button>
          </div>
        </div>
        <div *ngIf="message" class="success">{{ message }}</div>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button color="accent" (click)="goBack()" [disabled]="processing">Back</button>
      </mat-card-actions>
    </mat-card>
  </div>